<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Data – ASME B31.3</title>

<style>
body{font-family:Arial;background:#f2f4f7}
.container{max-width:1400px;margin:20px auto;background:#fff;padding:20px;border-radius:8px}
h2{text-align:center;color:#1f4e79}
h3{color:#1f4e79;margin-top:30px}

table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:6px;text-align:center;font-size:13px}
th{background:#eef4fb}
.section{margin-bottom:40px}

.small{font-size:12px;color:#555}
button{
 padding:6px 14px;
 background:#1f4e79;
 color:#fff;
 border:none;
 cursor:pointer;
 margin-bottom:10px
}
</style>
</head>

<body>
<div class="container">

<h2>Admin Data Viewer – ASME B31.3</h2>

<button onclick="location.href='admin-entry.html'">⬅ Back to Admin Entry</button>

<!-- ================================================= -->
<!-- MATERIAL MASTER -->
<!-- ================================================= -->
<div class="section">
<h3>Material Master</h3>

<table>
<thead>
<tr>
<th>Code & Standard</th>
<th>Material Family</th>
<th>Material</th>
<th>Grade</th>
</tr>
</thead>
<tbody id="materialTable"></tbody>
</table>
</div>

<!-- ================================================= -->
<!-- PIPE TYPE MASTER -->
<!-- ================================================= -->
<div class="section">
<h3>Pipe Type Master (E Factor)</h3>

<table>
<thead>
<tr>
<th>Pipe Type</th>
<th>E Factor</th>
</tr>
</thead>
<tbody id="pipeTypeTable"></tbody>
</table>
</div>

<!-- ================================================= -->
<!-- DIMENSIONS & WEIGHTS -->
<!-- ================================================= -->
<div class="section">
<h3>Dimensions and Weights of Welded and Seamless Wrought Steel Pipe</h3>
<div class="small">
As per ASME B36.10 / ASME B36.19 (Based on Material Master)
</div>

<table>
<thead>
<tr>
<th>Code</th>
<th>Material Family</th>
<th>Material</th>
<th>Grade</th>
<th>NPS</th>
<th>Identification</th>
<th>Schedule</th>
<th>OD (mm)</th>
<th>Thickness (mm)</th>
<th>Weight (kg/m)</th>
</tr>
</thead>
<tbody id="dimTable"></tbody>
</table>
</div>

<!-- ================================================= -->
<!-- Y FACTOR -->
<!-- ================================================= -->
<div class="section">
<h3>Y Factor – ASME B31.3</h3>

<table>
<thead>
<tr>
<th>Material (Family | Material)</th>
<th>Temperature (°C)</th>
<th>Y Factor</th>
</tr>
</thead>
<tbody id="yTable"></tbody>
</table>
</div>

<!-- ================================================= -->
<!-- W FACTOR -->
<!-- ================================================= -->
<div class="section">
<h3>W Factor – ASME B31.3</h3>

<table>
<thead>
<tr>
<th>Material (Family | Material)</th>
<th>Temperature (°C)</th>
<th>W Factor</th>
</tr>
</thead>
<tbody id="wTable"></tbody>
</table>
</div>

<!-- ================================================= -->
<!-- STRESS -->
<!-- ================================================= -->
<div class="section">
<h3>Material Basic Allowable Stress (S)</h3>

<table>
<thead>
<tr>
<th>Material</th>
<th>Temperature (°C)</th>
<th>Allowable Stress (MPa)</th>
</tr>
</thead>
<tbody id="sTable"></tbody>
</table>
</div>

</div>

<script>
/* ================= LOAD DATABASES ================= */
const materialMasterDB = JSON.parse(localStorage.getItem("materialMasterDB")) || [];
const pipeTypeDB       = JSON.parse(localStorage.getItem("pipeTypeDB")) || [];
const pipeDimWeightDB  = JSON.parse(localStorage.getItem("pipeDimWeightDB")) || [];
const yDB              = JSON.parse(localStorage.getItem("yDB")) || [];
const wDB              = JSON.parse(localStorage.getItem("wDB")) || [];
const stressDB         = JSON.parse(localStorage.getItem("stressDB")) || [];

/* ================= MATERIAL MASTER ================= */
materialMasterDB.forEach(m=>{
 materialTable.innerHTML+=`
 <tr>
  <td>${m.code}</td>
  <td>${m.family}</td>
  <td>${m.mat}</td>
  <td>${m.grade}</td>
 </tr>`;
});

/* ================= PIPE TYPE ================= */
pipeTypeDB.forEach(p=>{
 pipeTypeTable.innerHTML+=`
 <tr>
  <td>${p.type}</td>
  <td>${p.E}</td>
 </tr>`;
});

/* ================= DIMENSIONS ================= */
pipeDimWeightDB.forEach(d=>{
 dimTable.innerHTML+=`
 <tr>
  <td>${d.code}</td>
  <td>${d.family}</td>
  <td>${d.material}</td>
  <td>${d.grade}</td>
  <td>${d.nps}</td>
  <td>${d.identification || "—"}</td>
  <td>${d.schedule || "—"}</td>
  <td>${d.od}</td>
  <td>${d.thickness}</td>
  <td>${d.weight}</td>
 </tr>`;
});

/* ================= Y FACTOR ================= */
yDB.forEach(y=>{
 yTable.innerHTML+=`
 <tr>
  <td>${y.mat}</td>
  <td>${y.temp}</td>
  <td>${y.Y}</td>
 </tr>`;
});

/* ================= W FACTOR ================= */
wDB.forEach(w=>{
 wTable.innerHTML+=`
 <tr>
  <td>${w.mat}</td>
  <td>${w.temp}</td>
  <td>${w.W}</td>
 </tr>`;
});

/* ================= STRESS ================= */
stressDB.forEach(s=>{
 sTable.innerHTML+=`
 <tr>
  <td>${s.mat}</td>
  <td>${s.temp}</td>
  <td>${s.stress}</td>
 </tr>`;
});
</script>

</body>
</html>
